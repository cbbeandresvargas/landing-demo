---
// AboutSkills.astro - Technical Skills section for About page
import { getLangFromUrl } from "@i18n/utils";
import { getSkills } from "@utils/data";

const lang = getLangFromUrl(Astro.url);
const skillsData = getSkills(lang);
---

<!-- Skills Section -->
<section class="about-skills section home-dark-section py-20">
	<div class="col-span-12">
		<div class="max-w-4xl mx-auto">
			<h2 class="text-4xl font-bold mb-16 text-center font-display">
				{lang === 'es' ? 'Habilidades TÃ©cnicas' : 'Technical Skills'}
			</h2>
			<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
				{skillsData.map((category: any) => (
					<div class="skill-category text-center">
						<h3 class="text-xl font-bold mb-4 text-black">
							{category.category}
						</h3>
						<div class="space-y-3">
							{category.skills.map((skill: any) => (
								<span class="inline-block bg-slate-800 text-slate-300 px-3 py-1 rounded text-sm">
									{skill.name}
								</span>
							))}
						</div>
					</div>
				))}
			</div>
		</div>
	</div>
</section>

<script>
	import { gsap } from "gsap";
	import { ScrollTrigger } from "gsap/ScrollTrigger";

	gsap.registerPlugin(ScrollTrigger);

	function init() {
		// Animate title
		gsap.from('.about-skills h2', {
			scrollTrigger: {
				trigger: '.about-skills',
				start: "top 80%",
				end: "bottom 20%",
				toggleActions: "play none none reverse"
			},
			duration: 0.8,
			y: 50,
			opacity: 0,
			ease: "power2.out"
		});

		// Animate skill categories
		gsap.from('.about-skills .skill-category', {
			scrollTrigger: {
				trigger: '.about-skills',
				start: "top 70%",
				end: "bottom 20%",
				toggleActions: "play none none reverse"
			},
			duration: 0.8,
			y: 50,
			opacity: 0,
			ease: "power2.out",
			stagger: 0.2
		});
	}

	document.removeEventListener("DOMContentLoaded", init);
	document.addEventListener("DOMContentLoaded", init);
</script>
