---
// AboutLanguages.astro - Languages section for About page
import { getLangFromUrl } from "@i18n/utils";

const lang = getLangFromUrl(Astro.url);

// Languages data
const languagesData = [
	{
		id: 1,
		name: {
			en: "Spanish",
			es: "Español"
		},
		level: {
			en: "Native",
			es: "Nativo"
		},
		icon: "spain-flag"
	},
	{
		id: 2,
		name: {
			en: "English",
			es: "Inglés"
		},
		level: {
			en: "Professional Working Level",
			es: "Nivel Profesional"
		},
		icon: "usa-flag"
	},
	{
		id: 3,
		name: {
			en: "Others",
			es: "Otros"
		},
		level: {
			en: "Portuguese, Italian, Russian (Beginner)",
			es: "Portugués, Italiano, Ruso (Principiante)"
		},
		icon: "globe"
	}
];

// Icon component function
function getIcon(iconType: string) {
	const icons = {
		"spain-flag": `<svg class="w-12 h-12 mx-auto text-black" fill="currentColor" viewBox="0 0 24 24">
			<path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
			<path d="M12 6c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm0 10c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z"/>
			<circle cx="12" cy="12" r="2"/>
		</svg>`,
		"usa-flag": `<svg class="w-12 h-12 mx-auto text-black" fill="currentColor" viewBox="0 0 24 24">
			<path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
			<path d="M12 6c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm0 10c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z"/>
			<path d="M8 12h8M12 8v8"/>
		</svg>`,
		"globe": `<svg class="w-12 h-12 mx-auto text-black" fill="none" stroke="currentColor" viewBox="0 0 24 24">
			<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"/>
		</svg>`
	};
	return icons[iconType] || icons.globe;
}
---

<!-- Languages Section -->
<section class="about-languages section py-20">
	<div class="col-span-12">
		<div class="max-w-4xl mx-auto text-center">
			<h2 class="text-4xl font-bold mb-16 font-display">
				{lang === 'es' ? 'Idiomas' : 'Languages'}
			</h2>
			<div class="grid grid-cols-1 md:grid-cols-3 gap-8">
				{languagesData.map((language) => (
					<div class="language-card">
						<div class="mb-4" set:html={getIcon(language.icon)}></div>
						<h3 class="text-xl font-bold mb-2 text-black">
							{language.name[lang]}
						</h3>
						<p class="text-slate-600">
							{language.level[lang]}
						</p>
					</div>
				))}
			</div>
		</div>
	</div>
</section>

<script>
	import { gsap } from "gsap";
	import { ScrollTrigger } from "gsap/ScrollTrigger";

	gsap.registerPlugin(ScrollTrigger);

	function init() {
		// Animate title
		gsap.from('.about-languages h2', {
			scrollTrigger: {
				trigger: '.about-languages',
				start: "top 80%",
				end: "bottom 20%",
				toggleActions: "play none none reverse"
			},
			duration: 0.8,
			y: 50,
			opacity: 0,
			ease: "power2.out"
		});

		// Animate language cards
		gsap.from('.about-languages .language-card', {
			scrollTrigger: {
				trigger: '.about-languages',
				start: "top 70%",
				end: "bottom 20%",
				toggleActions: "play none none reverse"
			},
			duration: 0.8,
			y: 50,
			opacity: 0,
			ease: "power2.out",
			stagger: 0.2
		});
	}

	document.removeEventListener("DOMContentLoaded", init);
	document.addEventListener("DOMContentLoaded", init);
</script>
