---
import { getProjects, getProjectById } from "@utils/projects";
import type { AstroSeoProps } from "@astrolib/seo";
import BaseLayout from "@layouts/BaseLayout.astro";
import projectTemplateImage from "@assets/images/projects/project-template.jpg";

export async function getStaticPaths() {
	const projects = getProjects("es");
	
	return projects.map((project) => ({
		params: { slug: project.id },
		props: { project },
	}));
}

const { project } = Astro.props;

const seo: AstroSeoProps = {
	title: `Proyecto ${project.title} - Andres Vargas`,
	description: project.description,
	canonical: `https://mintaka.co/es/work/${project.id}/`,
	openGraph: {
		url: project.id,
		title: project.title,
		description: project.description,
		images: [
			{
				url: `https://mintaka.co/_astro/${project.image}`,
				width: 1200,
				height: 630,
				alt: project.title,
				type: "image/jpeg",
			},
		],
		site_name: "Portafolio de Andres Vargas",
	},
	twitter: {
		handle: "@TwitterHandle",
		site: "@site",
		cardType: "summary_large_image",
	},
};
---

<BaseLayout seo={seo}>
	<section class="section py-20">
		<div class="col-span-12">
			<div class="max-w-4xl mx-auto">
				<div class="mb-8">
					<img src={projectTemplateImage} alt={project.title} class="w-full h-64 object-cover rounded-lg mb-6" />
					<h1 class="text-4xl font-bold mb-4">{project.title}</h1>
					<p class="text-xl text-slate-600 mb-6">{project.description}</p>
					<div class="flex gap-4 mb-8">
						<a href={project.link} target="_blank" class="bg-slate-900 text-white px-6 py-3 rounded-lg hover:bg-slate-800 transition-colors">
							Ver Proyecto
						</a>
					</div>
				</div>
				<div class="prose prose-lg max-w-none">
					{project.content.split('\n').map(paragraph => 
						paragraph.trim() ? `<p>${paragraph}</p>` : ''
					).join('')}
				</div>
			</div>
		</div>
	</section>
</BaseLayout>
